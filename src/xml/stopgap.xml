<?xml version="1.0" encoding="UTF-8"?>

<AnalysisModuleLibrary xmlns:xsi = "http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://openmicroscopy.org/XMLschemas/AnalysisModule/IR3/AnalysisModule.xsd">

<AnalysisModule
    Category="Statistics" ModuleName="Stack statistics"
    ModuleType="OME::Analysis::StopgapCLIHandler"
    ProgramID="/OME/bin/OME_Image_XYZ_stats"
    Description="Calculate pixel statistics for each XYZ stack">

  <Declaration>
    <Table
        Granularity="I" TableName="XYZ_IMAGE_INFO"
        Description="General pixel statistics across stacks">
      <Column 
          ColumnID="stackW" ColumnName="THE_W"
          SQL_DataType="integer" Description="W coordinate"/>
      <Column 
          ColumnID="stackT" ColumnName="THE_T"
          SQL_DataType="integer" Description="T coordinate"/>
      <Column 
          ColumnID="stackMinimum" ColumnName="MINIMUM"
          SQL_DataType="integer" Description="Minimum intensity"/>
      <Column 
          ColumnID="stackMaximum" ColumnName="MAXIMUM"
          SQL_DataType="integer" Description="Maximum intensity"/>
      <Column 
          ColumnID="stackMean" ColumnName="MEAN"
          SQL_DataType="float" Description="Mean intensity"/>
      <Column 
          ColumnID="stackGeomean" ColumnName="GEOMEAN"
          SQL_DataType="float" Description="Geometric mean intensity"/>
      <Column 
          ColumnID="stackSigma" ColumnName="SIGMA"
          SQL_DataType="float" Description="Standard deviation of intensity"/>
      <Column 
          ColumnID="stackCentroidX" ColumnName="CENTROID_X"
          SQL_DataType="float" Description="Intensity centroid X coordinate"/>
      <Column 
          ColumnID="stackCentroidY" ColumnName="CENTROID_Y"
          SQL_DataType="float" Description="Intensity centroid Y coordinate"/>
      <Column 
          ColumnID="stackCentroidZ" ColumnName="CENTROID_Z"
          SQL_DataType="float" Description="Intensity centroid Z coordinate"/>
    </Table>

    <FormalOutput
        Name="Stack minimum" AttributeTypeName="Stack minimum"
        Description="">
      <FormalOutputColumn
          Name="MINIMUM" FormalOutputColumnID="StackMin.Mininum"
          ColumnID="stackMinimum" Description=""/>
      <FormalOutputColumn
          Name="WAVENUMBER" FormalOutputColumnID="StackMin.Wave"
          ColumnID="stackW" Description=""/>
      <FormalOutputColumn
          Name="TIMEPOINT" FormalOutputColumnID="StackMin.Time"
          ColumnID="stackT" Description=""/>
    </FormalOutput>

    <FormalOutput
        Name="Stack maximum" AttributeTypeName="Stack maximum"
        Description="">
      <FormalOutputColumn
          Name="MAXIMUM" FormalOutputColumnID="StackMax.Maximum"
          ColumnID="stackMaximum" Description=""/>
      <FormalOutputColumn
          Name="WAVENUMBER" FormalOutputColumnID="StackMax.Wave"
          ColumnID="stackW" Description=""/>
      <FormalOutputColumn
          Name="TIMEPOINT" FormalOutputColumnID="StackMax.Time"
          ColumnID="stackT" Description=""/>
    </FormalOutput>

    <FormalOutput
        Name="Stack mean" AttributeTypeName="Stack mean"
        Description="">
      <FormalOutputColumn
          Name="MEAN" FormalOutputColumnID="StackMean.Mean"
          ColumnID="stackMean" Description=""/>
      <FormalOutputColumn
          Name="WAVENUMBER" FormalOutputColumnID="StackMean.Wave"
          ColumnID="stackW" Description=""/>
      <FormalOutputColumn
          Name="TIMEPOINT" FormalOutputColumnID="StackMean.Time"
          ColumnID="stackT" Description=""/>
    </FormalOutput>

    <FormalOutput
        Name="Stack geomean" AttributeTypeName="Stack geomean"
        Description="">
      <FormalOutputColumn
          Name="GEOMEAN" FormalOutputColumnID="StackGeomean.Geomean"
          ColumnID="stackGeomean" Description=""/>
      <FormalOutputColumn
          Name="WAVENUMBER" FormalOutputColumnID="StackGeomean.Wave"
          ColumnID="stackW" Description=""/>
      <FormalOutputColumn
          Name="TIMEPOINT" FormalOutputColumnID="StackGeomean.Time"
          ColumnID="stackT" Description=""/>
    </FormalOutput>

    <FormalOutput
        Name="Stack sigma" AttributeTypeName="Stack sigma"
        Description="">
      <FormalOutputColumn
          Name="SIGMA" FormalOutputColumnID="StackSigma.Sigma"
          ColumnID="stackSigma" Description=""/>
      <FormalOutputColumn
          Name="WAVENUMBER" FormalOutputColumnID="StackSigma.Wave"
          ColumnID="stackW" Description=""/>
      <FormalOutputColumn
          Name="TIMEPOINT" FormalOutputColumnID="StackSigma.Time"
          ColumnID="stackT" Description=""/>
    </FormalOutput>

    <FormalOutput
        Name="Stack centroid" AttributeTypeName="Stack centroid"
        Description="">
      <FormalOutputColumn
          Name="X" FormalOutputColumnID="StackCentroid.CentroidX"
          ColumnID="stackCentroidX" Description=""/>
      <FormalOutputColumn
          Name="Y" FormalOutputColumnID="StackCentroid.CentroidY"
          ColumnID="stackCentroidY" Description=""/>
      <FormalOutputColumn
          Name="Z" FormalOutputColumnID="StackCentroid.CentroidZ"
          ColumnID="stackCentroidZ" Description=""/>
      <FormalOutputColumn
          Name="WAVENUMBER" FormalOutputColumnID="StackCentroid.Wave"
          ColumnID="stackW" Description=""/>
      <FormalOutputColumn
          Name="TIMEPOINT" FormalOutputColumnID="StackCentroid.Time"
          ColumnID="stackT" Description=""/>
    </FormalOutput>
  </Declaration>

</AnalysisModule>

<AnalysisModule
    Category="Statistics" ModuleName="Plane statistics"
    ModuleType="OME::Analysis::StopgapCLIHandler"
    ProgramID="/OME/bin/OME_Image_XY_stats"
    Description="Calculate pixel statistics for each XY plane">

  <Declaration>
    <Table
        Granularity="I" TableName="XY_IMAGE_INFO"
        Description="General pixel statistics across planes">
      <Column 
          ColumnID="planeZ" ColumnName="THE_Z"
          SQL_DataType="integer" Description="Z coordinate"/>
      <Column 
          ColumnID="planeW" ColumnName="THE_W"
          SQL_DataType="integer" Description="W coordinate"/>
      <Column 
          ColumnID="planeT" ColumnName="THE_T"
          SQL_DataType="integer" Description="T coordinate"/>
      <Column 
          ColumnID="planeMinimum" ColumnName="MINIMUM"
          SQL_DataType="integer" Description="Minimum intensity"/>
      <Column 
          ColumnID="planeMaximum" ColumnName="MAXIMUM"
          SQL_DataType="integer" Description="Maximum intensity"/>
      <Column 
          ColumnID="planeMean" ColumnName="MEAN"
          SQL_DataType="float" Description="Mean intensity"/>
      <Column 
          ColumnID="planeGeomean" ColumnName="GEOMEAN"
          SQL_DataType="float" Description="Geometric mean intensity"/>
      <Column 
          ColumnID="planeSigma" ColumnName="SIGMA"
          SQL_DataType="float" Description="Standard deviation of intensity"/>
      <Column 
          ColumnID="planeCentroidX" ColumnName="CENTROID_X"
          SQL_DataType="float" Description="Intensity centroid X coordinate"/>
      <Column 
          ColumnID="planeCentroidY" ColumnName="CENTROID_Y"
          SQL_DataType="float" Description="Intensity centroid Y coordinate"/>
    </Table>

    <FormalOutput
        Name="Plane minimum" AttributeTypeName="Plane minimum"
        Description="">
      <FormalOutputColumn
          Name="MINIMUM" FormalOutputColumnID="PlaneMin.Mininum"
          ColumnID="planeMinimum" Description=""/>
      <FormalOutputColumn
          Name="ZSECTION" FormalOutputColumnID="PlaneMin.Z"
          ColumnID="planeZ" Description=""/>
      <FormalOutputColumn
          Name="WAVENUMBER" FormalOutputColumnID="PlaneMin.Wave"
          ColumnID="planeW" Description=""/>
      <FormalOutputColumn
          Name="TIMEPOINT" FormalOutputColumnID="PlaneMin.Time"
          ColumnID="planeT" Description=""/>
    </FormalOutput>

    <FormalOutput
        Name="Plane maximum" AttributeTypeName="Plane maximum"
        Description="">
      <FormalOutputColumn
          Name="MAXIMUM" FormalOutputColumnID="PlaneMax.Maximum"
          ColumnID="planeMaximum" Description=""/>
      <FormalOutputColumn
          Name="ZSECTION" FormalOutputColumnID="PlaneMax.Z"
          ColumnID="planeZ" Description=""/>
      <FormalOutputColumn
          Name="WAVENUMBER" FormalOutputColumnID="PlaneMax.Wave"
          ColumnID="planeW" Description=""/>
      <FormalOutputColumn
          Name="TIMEPOINT" FormalOutputColumnID="PlaneMax.Time"
          ColumnID="planeT" Description=""/>
    </FormalOutput>

    <FormalOutput
        Name="Plane mean" AttributeTypeName="Plane mean"
        Description="">
      <FormalOutputColumn
          Name="MEAN" FormalOutputColumnID="PlaneMean.Mean"
          ColumnID="planeMean" Description=""/>
      <FormalOutputColumn
          Name="ZSECTION" FormalOutputColumnID="PlaneMean.Z"
          ColumnID="planeZ" Description=""/>
      <FormalOutputColumn
          Name="WAVENUMBER" FormalOutputColumnID="PlaneMean.Wave"
          ColumnID="planeW" Description=""/>
      <FormalOutputColumn
          Name="TIMEPOINT" FormalOutputColumnID="PlaneMean.Time"
          ColumnID="planeT" Description=""/>
    </FormalOutput>

    <FormalOutput
        Name="Plane geomean" AttributeTypeName="Plane geomean"
        Description="">
      <FormalOutputColumn
          Name="GEOMEAN" FormalOutputColumnID="PlaneGeomean.Geomean"
          ColumnID="planeGeomean" Description=""/>
      <FormalOutputColumn
          Name="ZSECTION" FormalOutputColumnID="PlaneGeomean.Z"
          ColumnID="planeZ" Description=""/>
      <FormalOutputColumn
          Name="WAVENUMBER" FormalOutputColumnID="PlaneGeomean.Wave"
          ColumnID="planeW" Description=""/>
      <FormalOutputColumn
          Name="TIMEPOINT" FormalOutputColumnID="PlaneGeomean.Time"
          ColumnID="planeT" Description=""/>
    </FormalOutput>

    <FormalOutput
        Name="Plane sigma" AttributeTypeName="Plane sigma"
        Description="">
      <FormalOutputColumn
          Name="SIGMA" FormalOutputColumnID="PlaneSigma.Sigma"
          ColumnID="planeSigma" Description=""/>
      <FormalOutputColumn
          Name="ZSECTION" FormalOutputColumnID="PlaneSigma.Z"
          ColumnID="planeZ" Description=""/>
      <FormalOutputColumn
          Name="WAVENUMBER" FormalOutputColumnID="PlaneSigma.Wave"
          ColumnID="planeW" Description=""/>
      <FormalOutputColumn
          Name="TIMEPOINT" FormalOutputColumnID="PlaneSigma.Time"
          ColumnID="planeT" Description=""/>
    </FormalOutput>

    <FormalOutput
        Name="Plane centroid" AttributeTypeName="Plane centroid"
        Description="">
      <FormalOutputColumn
          Name="X" FormalOutputColumnID="PlaneCentroid.CentroidX"
          ColumnID="planeCentroidX" Description=""/>
      <FormalOutputColumn
          Name="Y" FormalOutputColumnID="PlaneCentroid.CentroidY"
          ColumnID="planeCentroidY" Description=""/>
      <FormalOutputColumn
          Name="ZSECTION" FormalOutputColumnID="PlaneCentroid.Z"
          ColumnID="planeZ" Description=""/>
      <FormalOutputColumn
          Name="WAVENUMBER" FormalOutputColumnID="PlaneCentroid.Wave"
          ColumnID="planeW" Description=""/>
      <FormalOutputColumn
          Name="TIMEPOINT" FormalOutputColumnID="PlaneCentroid.Time"
          ColumnID="planeT" Description=""/>
    </FormalOutput>
  </Declaration>

</AnalysisModule>

</AnalysisModuleLibrary>
