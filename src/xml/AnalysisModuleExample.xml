<?xml version = "1.0" encoding = "UTF-8"?>
<AnalysisModuleLibrary xmlns:xsi = "http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation = "http://www.openmicroscopy.org/XMLschemas/OME/RC3/ome.xsd file:///Users/josiah/OME/SourceForge/OME/src/xml/ome.xsd" xsi:noNamespaceSchemaLocation = "file:///Users/josiah/OME/SourceForge/OME/src/xml/AnalysisModule.xsd">
	<AnalysisModule Category = "Statistics" ModuleName = "Plane statistics" ModuleType = "OME::Analysis::CLIHandler" ProgramID = "/OME/bin/OME_Image_XY_stats" Description = "Calculate pixel statistics for each XY plane. Produced from XML.">
		<Declaration>
			<FormalOutput Name = "Plane info - Sigma" FormalOutputID = "SIGMA" Description = "Produced from XML">
					<DBLocation TableID = "xyImageInfo" ColumnName = "SIGMA"
						Description = "Produced from XML" SQL_DataType = "float"/>
			</FormalOutput>
			<FormalOutput Name = "Plane info - Geometric Mean" FormalOutputID = "GEOMEAN" Description = "Produced from XML">
					<DBLocation TableID = "xyImageInfo" ColumnName = "GEOMEAN"
						Description = "Produced from XML" SQL_DataType = "float"/>
			</FormalOutput>
			<FormalOutput Name = "Plane info - Arithmetic Mean" FormalOutputID = "MEAN" Description = "Produced from XML">
					<DBLocation TableID = "xyImageInfo" ColumnName = "MEAN"
						Description = "Produced from XML" SQL_DataType = "float"/>
			</FormalOutput>
			<FormalOutput Name = "Plane info - Maximum" FormalOutputID = "MAX" Description = "Produced from XML">
					<DBLocation TableID = "xyImageInfo" ColumnName = "MAX"
						Description = "Produced from XML" SQL_DataType = "integer"/>
			</FormalOutput>
			<FormalOutput Name = "Plane info - Minimum" FormalOutputID = "MIN" Description = "Produced from XML">
					<DBLocation TableID = "xyImageInfo" ColumnName = "MIN"
						Description = "Produced from XML" SQL_DataType = "integer"/>
			</FormalOutput>
			<FormalOutput Name = "Plane info - theZ" FormalOutputID = "theZ" Description = "Produced from XML">
					<DBLocation TableID = "xyImageInfo" ColumnName = "ZSECTION"
						Description = "Produced from XML" SQL_DataType = "integer"/>
			</FormalOutput>
			<FormalOutput Name = "Plane info - theT" FormalOutputID = "theT" Description = "Produced from XML">
					<DBLocation TableID = "xyImageInfo" ColumnName = "TIMEPOINT"
						Description = "Produced from XML" SQL_DataType = "integer"/>
			</FormalOutput>
			<FormalOutput Name = "Plane info - theW" FormalOutputID = "theW" Description = "Produced from XML">
					<DBLocation TableID = "xyImageInfo" ColumnName = "WAVENUMBER" 
						Description = "Produced from XML" SQL_DataType = "integer"/>
			</FormalOutput>
			<TableDefinition TableID = "xyImageInfo" AttributeType = "I" 
				TableName = "XY_IMAGE_INFO" 
				Description = "General image XY slice attributes. Produced from XML."/>
		</Declaration>
		<ExecutionInstructions ExecutionPoint = "precalculateImage" MakesNewFeature = "false">
			<CommandLine>Path=<RawImageFilePath/> Dims=<sizeX/>,<sizeY/>,<sizeZ/>,<sizeT/>,<sizeW/>,<BytesPerPixel/></CommandLine>
			<STDOUT>
				<OutputRecord RepeatCount= "1">
					<re>/.*$/</re>
				</OutputRecord>
				<!-- That was supposed to eat a line -->
				<OutputRecord>
					<re>/^(\d+)\t(\d+)\t(\d+)\t(\d+)\t(\d+)\st\d+)\t(\d+)\t(\d+)$/</re>
					<Output FormalOutputID = "theW" AccessBy = "$1"/>
					<Output FormalOutputID = "theT" AccessBy = "$2"/>
					<Output FormalOutputID = "theZ" AccessBy = "$3"/>
					<Output FormalOutputID = "MIN" AccessBy = "$4"/>
					<Output FormalOutputID = "MAX" AccessBy = "$5"/>
					<Output FormalOutputID = "MEAN" AccessBy = "$6"/>
					<Output FormalOutputID = "GEOMEAN" AccessBy = "$7"/>
					<Output FormalOutputID = "SIGMA" AccessBy = "$8"/>
				</OutputRecord>
				<!-- That was supposed to read a line of output & repeat until it has reached the end of the stream. -->
			</STDOUT>
		</ExecutionInstructions>
	</AnalysisModule>
	<AnalysisModule Category = "Examples" ModuleName = "foo" 
		ModuleType = "OME::Analysis::CLIHandler" ProgramID = "/dev/null" 
		Description = "Produced from XML.">
		<Declaration>
			<FormalInput Name = "fee" FormalOutputID = "eenie" Description = "Produced from XML">
					<DBLocation TableID = "bar" ColumnName = "FEE"
						Description = "Produced from XML" SQL_DataType = "boolean"/>
			</FormalInput>
			<FormalInput Name = "fi" FormalOutputID = "meenie" Description = "Produced from XML">
					<DBLocation TableID = "bar" ColumnName = "FI"
						Description = "Produced from XML" SQL_DataType = "double"/>
			</FormalInput>
			<FormalInput Name = "fo" FormalOutputID = "minie" Description = "Produced from XML">
					<DBLocation TableID = "bar" ColumnName = "FO"
						Description = "Produced from XML" SQL_DataType = "dateTime"/>
			</FormalInput>
			<FormalInput Name = "fum" FormalOutputID = "mo" Description = "Produced from XML">
					<DBLocation TableID = "bar" ColumnName = "FUM"
						Description = "Produced from XML" SQL_DataType = "integer"/>
			</FormalInput>
			<FormalOutput Name = "eenie" FormalOutputID = "eenie" Description = "Produced from XML">
					<DBLocation TableID = "baz" ColumnName = "EENIE"
						Description = "Produced from XML" SQL_DataType = "float"/>
			</FormalOutput>
			<FormalOutput Name = "meenie" FormalOutputID = "meenie" Description = "Produced from XML">
					<DBLocation TableID = "baz" ColumnName = "MEENIE"
						Description = "Produced from XML" SQL_DataType = "string"/>
			</FormalOutput>
			<FormalOutput Name = "minie" FormalOutputID = "minie" Description = "Produced from XML">
					<DBLocation TableID = "baz" ColumnName = "MINIE"
						Description = "Produced from XML" SQL_DataType = "dateTime"/>
			</FormalOutput>
			<FormalOutput Name = "mo" FormalOutputID = "mo" Description = "Produced from XML">
					<DBLocation TableID = "baz" ColumnName = "MO"
						Description = "Produced from XML" SQL_DataType = "integer"/>
			</FormalOutput>
			<TableDefinition TableID = "baz" AttributeType = "D" 
				TableName = "BAZ" Description = "foo's outputs. Produced from XML."/>
			<TableDefinition TableID = "bar" AttributeType = "D" 
				TableName = "BAR" Description = "foo's inputs. Produced from XML."/>
		</Declaration>
	</AnalysisModule>
</AnalysisModuleLibrary>
